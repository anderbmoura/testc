import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Guia de Contribui√ß√£o/Conven√ß√µes do Projeto" />

# Conven√ß√µes do Projeto

Descri√ß√£o das conven√ß√µes adotadas na DSC Library com o objetivo de garantir consist√™ncia, qualidade e facilidade de manuten√ß√£o dos componentes.

## Design System e Figma

Todos os componentes devem ser desenvolvidos com base nos designs dispon√≠veis na biblioteca do <a href="https://www.figma.com/design/epCGtlKQxedDxQVlK3lNcN/DSC-%7C-React-Native---Tamagui?node-id=1180-3541&p=f&t=sNYfTUNxw7ZfqylZ-0" target="_blank">Figma do projeto</a>. Certifique-se de:

- Consultar o Figma antes de iniciar o desenvolvimento.
- Respeitar as especifica√ß√µes de espa√ßamento, cores e tipografia.
- Validar o resultado final com o design proposto.

## Tokens e Temas

**Sempre** utilize os tokens e temas definidos na configura√ß√£o do Tamagui para manter a consist√™ncia visual.

**‚úÖ Construindo com tokens:**

```tsx
const MyComponent = styled(View, {
  backgroundColor: '$highlightBg',
  padding: '$small',
  borderRadius: '$nano',
});
```

**‚ùå Utilizando valores fixos:**

```tsx
const MyComponent = styled(View, {
  backgroundColor: '#FFFFFF',
  padding: 16,
  borderRadius: 8,
});
```

### Exemplos de tokens:

- **[Cores](?path=/docs/design-system-color-palettes--docs)**: `$color1`, `$color9`, `$highlightBg `, etc.
- **Espa√ßamentos**: `$none`, `$quark`, `$nano`, `$micro`, `$tiny`, `$smaller`, `$small`, `$medium`, `$large`, `$larger`, `$big`, `$bigger`
- **Border Radius**: `$none`, `$quark`, `$nano`, `$small`, `$medium`, `$large`, `$big`, `$pill`
- **Border Width**: `$none`, `$hairline`, `$thin`, `$thick`, `$heavy`
- **Icon Size**: `$tiny`, `$small`, `$medium`, `$large`, `$big`, `$huge`
- **Opacity**: `$4`, `$8`, `$12`, `$16`, `$24`, `$32`, `$40`, `$48`, `$56`, `$64`, `$100`
- **Z-Index**: `$0`, `$100`, `$200`, `$300`, `$400`, `$500`

## Sistema de Tipografia

Use os [componentes de tipografia](?path=/docs/components-typography--docs) espec√≠ficos da DSC Library para manter consist√™ncia visual e sem√¢ntica.

**Componentes espec√≠ficos de tipografia:**

```tsx
import {
  DisplayStandard,
  TitleLarge,
  BodyStandard,
  LabelSmall
} from '@superapp-caixa/dsc-library';

<DisplayStandard>T√≠tulo Principal da Tela</DisplayStandard>
<TitleLarge>Se√ß√£o Importante</TitleLarge>
<BodyStandard>Texto explicativo do conte√∫do</BodyStandard>
<LabelSmall>R√≥tulo de campo</LabelSmall>
```

**Para valores num√©ricos, utilize variantes num√©ricas:**

```tsx
import { DisplayNumericalStandard, TitleNumericalLarge } from '@superapp-caixa/dsc-library';

<DisplayNumericalStandard>R$ 1.234,56</DisplayNumericalStandard>
<TitleNumericalLarge>1.000</TitleNumericalLarge>
```

### Alternativa: Uso direto dos presets

Em casos espec√≠ficos onde precisar criar componentes customizados, voc√™ pode usar os presets de tipografia diretamente:

```tsx
import { styled, Text } from 'tamagui';
import { typography } from '@superapp-caixa/dsc-library';

const CustomTitle = styled(Text, {
  ...typography.titleLarge,
  color: '$color9',
});

const CustomLabel = styled(Text, {
  ...typography.labelSmall,
  textTransform: 'uppercase',
});
```

> ‚ö†Ô∏è **Importante**: Sempre que poss√≠vel, prefira os [componentes de tipografia](?path=/docs/components-typography--docs). Use os presets diretamente apenas quando os componentes prontos n√£o atendem ao caso de uso espec√≠fico. Os componentes garantem melhor consist√™ncia e manutenibilidade.

## Sistema de √çcones

A DSC Library utiliza a biblioteca <a href="https://iconoir.com/" target="_blank">Iconoir</a> para √≠cones. Use sempre √≠cones desta biblioteca para manter consist√™ncia visual.

**Utilizando √≠cones do Iconoir:**

```tsx
import { Home, Settings } from 'iconoir-react-native';
import { Button } from '@superapp-caixa/dsc-library';

<Button icon={Home}>In√≠cio</Button>
<Button icon={Settings} size="small">Configura√ß√µes</Button>
```

**Com tamanho personalizado usando tokens:**

```tsx
import { Home } from 'iconoir-react-native';

<Home width="$iconSize.medium" height="$iconSize.medium" />;
```

## Styled e Variants

Crie componentes usando `styled()` do Tamagui e defina **variants** para diferen√ßas visuais.

**Links √∫teis:**
- <a href="https://tamagui.dev/docs/core/styled" target="_blank">Tamagui - Styled</a>  
- <a href="https://tamagui.dev/docs/core/variants" target="_blank">Tamagui - Variants</a>

**Exemplo de uso:**

```tsx
import { styled } from 'tamagui';

const DscCard = styled(View, {
  name: 'DscCard',
  borderRadius: '$nano',
  padding: '$large',
  backgroundColor: '$color1',

  variants: {
    tone: {
      neutral: {
        backgroundColor: '$neutral1',
        borderColor: '$neutral4',
      },
      accent: {
        backgroundColor: '$color2',
        borderColor: '$color6',
      },
    },

    size: {
      small: {
        padding: '$small',
      },
      large: {
        padding: '$large',
      },
    },
  } as const,
});
```

## Estados Interativos

Sempre defina estilos para estados de intera√ß√£o quando aplic√°vel.

```tsx
const InteractiveCard = styled(View, {
  // estilos base...

  hoverStyle: {
    backgroundColor: '$color2',
  },

  pressStyle: {
    backgroundColor: '$color3',
  },

  focusStyle: {
    borderColor: '$color9',
    borderWidth: 2,
  },

  disabledStyle: {
    opacity: 0.5,
    backgroundColor: '$neutral3',
  },
});
```

## Modelos de Tipos (.model)

Utilize arquivos `.model.ts` para definir e limitar as possibilidades de customiza√ß√£o, especialmente quando baseado em componentes existentes do Tamagui.

```tsx
// Button.model.ts
import { ButtonProps as TamaguiButtonProps } from 'tamagui';

export interface ButtonProps extends Omit<TamaguiButtonProps, 'size' | 'theme'> {
  theme?: 'highlight' | 'neutral' | 'danger';
  size?: 'small' | 'standard' | 'large';
  type?: 'plain' | 'outline' | 'chromeless';
  loading?: boolean;
}
```

## Layout Responsivo

**Utilize flexbox** como principal ferramenta de layout. Evite tamanhos fixos (`width`/`height`) sempre que poss√≠vel.

### Componentes de Layout

Use `YStack` para layouts verticais e `XStack` para layouts horizontais:

**‚úÖ Layout vertical com YStack:**

```tsx
<YStack space="$medium" padding="$medium" flex={1}>
  <TitleLarge>T√≠tulo</TitleLarge>
  <BodyStandard>Descri√ß√£o do conte√∫do</BodyStandard>
  <Button>A√ß√£o Principal</Button>
</YStack>
```

**‚úÖ Layout horizontal com XStack:**

```tsx
<XStack space="$small" alignItems="center" justifyContent="space-between">
  <LabelSmall>R√≥tulo</LabelSmall>
  <Button size="small">A√ß√£o</Button>
</XStack>
```

**‚ùå Utilizando tamanhos fixos:**

```tsx
<View style={{ width: 300, height: 200 }}>
  <Text>Conte√∫do</Text>
</View>
```

### Breakpoints e Responsividade

Para diferentes tamanhos de tela, use as props de breakpoint do Tamagui:

```tsx
<YStack padding="$small" $sm={{ padding: '$medium' }} $md={{ padding: '$large' }}>
  <XStack flexDirection="column" $sm={{ flexDirection: 'row' }} space="$small">
    <Button flex={1}>Bot√£o 1</Button>
    <Button flex={1}>Bot√£o 2</Button>
  </XStack>
</YStack>
```

### Quando usar cada abordagem

- **YStack**: Para listas, formul√°rios, conte√∫do sequencial
- **XStack**: Para barras de a√ß√£o, headers, elementos lado a lado
- **flex={1}**: Para componentes que devem ocupar espa√ßo dispon√≠vel
- **space**: Para espa√ßamento consistente entre elementos filhos

> **Exce√ß√£o**: Tamanhos m√≠nimos em controles (como `minHeight` em bot√µes) s√£o permitidos quando necess√°rios para o design.

**Links √∫teis:**
- <a href="https://tamagui.dev/docs/intro/themes#media-queries" target="_blank">Tamagui - Media Queries e Breakpoints</a>
- <a href="https://reactnative.dev/docs/flexbox" target="_blank">React Native - Layout com Flexbox</a>

## Composi√ß√£o de Componentes

Prefira compor componentes menores para criar funcionalidades complexas, reutilizando componentes existentes da DSC Library.

**Exemplo: Criando um Card de Produto compondo o layout com outros componentes:**

```tsx
import { Card, Button, TitleMedium, BodySmall, LabelSmall, XStack, YStack } from '@superapp-caixa/dsc-library';
import { ShoppingCart, Heart } from 'iconoir-react-native';

export const ProductCard = ({ title, description, price, onAddToCart, onToggleFavorite, isFavorite = false }) => {
  return (
    <Card padding="$medium" space="$small">
      <YStack space="$small" flex={1}>
        <TitleMedium numberOfLines={2}>{title}</TitleMedium>
        <BodySmall color="$neutral9" numberOfLines={3}>
          {description}
        </BodySmall>

        <XStack justifyContent="space-between" alignItems="center" marginTop="auto">
          <LabelSmall color="$color9" fontWeight="bold">
            {price}
          </LabelSmall>

          <XStack space="$tiny">
            <Button
              icon={Heart}
              type="chromeless"
              size="small"
              theme={isFavorite ? 'highlight' : 'neutral'}
              onPress={onToggleFavorite}
            />
            <Button icon={ShoppingCart} size="small" onPress={onAddToCart}>
              Adicionar
            </Button>
          </XStack>
        </XStack>
      </YStack>
    </Card>
  );
};
```

**Exemplo: Criando um Header de Se√ß√£o:**

```tsx
import { XStack, YStack, Button, TitleLarge, BodySmall } from '@superapp-caixa/dsc-library';
import { ArrowRight } from 'iconoir-react-native';

export const SectionHeader = ({ title, subtitle, actionLabel, onActionPress }) => {
  return (
    <XStack justifyContent="space-between" alignItems="flex-end" padding="$medium">
      <YStack flex={1} space="$tiny">
        <TitleLarge>{title}</TitleLarge>
        {subtitle && <BodySmall color="$neutral9">{subtitle}</BodySmall>}
      </YStack>

      {actionLabel && (
        <Button type="chromeless" size="small" icon={ArrowRight} iconAfter onPress={onActionPress}>
          {actionLabel}
        </Button>
      )}
    </XStack>
  );
};
```

**Links √∫teis:**
- <a href="https://tamagui.dev/docs/guides/how-to-build-a-button" target="_blank">Tamagui - How to Build a Button</a>

## Estrutura de Arquivos

Organize cada componente em sua pr√≥pria pasta:

```
components/
  MyComponent/
    index.ts          # exporta√ß√µes
    MyComponent.tsx   # componente principal
    MyComponent.model.ts    # tipos e interfaces
    MyComponent.stories.tsx # stories do Storybook
```

## Documenta√ß√£o

Todo componente deve ter:

- **JSDoc**: Props e componentes devem ser documentados, fornecendo exemplos de uso.
- **Storybook**: Documenta√ß√£o mostrando variantes e estados.

````tsx
/**
 * Bot√£o customizado da DSC Library
 *
 * @param theme - Tema visual do bot√£o
 * ```tsx
 * <Button theme="highlight">Bot√£o destaque</Button>
 * ```
 */
export const Button = ({ theme = 'neutral', ...props }) => {
  // implementa√ß√£o...
};
````

## Performance e Otimiza√ß√µes

Siga estas pr√°ticas para garantir componentes perform√°ticos:

### Uso de styled() vs Componentes Inline

**‚úÖ Prefira styled() para componentes reutiliz√°veis:**

```tsx
// Boa pr√°tica - otimizado
const OptimizedCard = styled(View, {
  name: 'OptimizedCard',
  backgroundColor: '$color1',
  padding: '$medium',
  borderRadius: '$small',
});
```

**‚ùå Evite estilos inline em componentes reutiliz√°veis:**

```tsx
// Evitar - cria novos objetos a cada render
const SlowCard = () => (
  <View
    style={{
      backgroundColor: 'white',
      padding: 16,
      borderRadius: 8,
    }}
  />
);
```

### Preven√ß√£o de Re-renders

**Use React.memo para componentes que recebem props complexas:**

```tsx
import { memo } from 'react';

export const ExpensiveComponent = memo(({ data, onPress }) => {
  return <YStack space="$small">{/* renderiza√ß√£o complexa */}</YStack>;
});
```

**Use useCallback para fun√ß√µes passadas como props:**

```tsx
import { useCallback } from 'react';

export const ParentComponent = () => {
  const handlePress = useCallback((id: string) => {
    // l√≥gica de manipula√ß√£o
  }, []);

  return <OptimizedCard onPress={handlePress} />;
};
```

### Otimiza√ß√µes Espec√≠ficas do Tamagui

**Use a prop `name` no styled() para debugging:**

```tsx
const MyComponent = styled(View, {
  name: 'MyComponent', // facilita debugging e otimiza√ß√µes
  // estilos...
});
```

**Evite c√°lculos pesados em variants:**

```tsx
// ‚úÖ Boa pr√°tica
const variants = {
  size: {
    small: { padding: '$small' },
    large: { padding: '$large' },
  },
} as const;

// ‚ùå Evitar
const variants = {
  size: {
    small: { padding: calculatePadding('small') }, // c√°lculo a cada render
  },
};
```

**Links √∫teis:**

- <a href="https://tamagui.dev/docs/guides/design-systems" target="_blank">Tamagui - Building Design Systems</a>
- <a href="https://react.dev/reference/react/memo" target="_blank">React - memo</a>

> üí° **Lembre-se**: Essas conven√ß√µes garantem que a DSC Library permane√ßa consistente, perform√°tica e f√°cil de manter. Quando em d√∫vida, consulte os componentes existentes como refer√™ncia.

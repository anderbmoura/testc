import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as InputStories from './Input.stories';

<Meta title="Componentes/Forms/Input" />

# Input

Campo de entrada de texto da DSC Library.

## Características principais

### Composição
Os botões de suporte, tanto na forma de ícone quanto de texto, são implementados como subcomponentes (`Input.IconButton` e `Input.Button`). O mesmo vale para mensagens de erro, texto de apoio e contador de caracteres, que são implementados como `Input.Error`, `Input.SupportingText` e `Input.Counter`, respectivamente.

### Multiline
Suporte a campos de texto de múltiplas linhas.

## Como usar

```tsx
import React, { useState } from 'react';
import { Input } from '@superapp-caixa/dsc-library';
import { Search } from 'iconoir-react-native';

const BasicInput = () => {
  const [text, setText] = useState('');

  return (
    <Input 
      value={text}
      placeholder="Digite algo"
      onChangeText={setText}
    />
  );
};
```

## Input básico

<Canvas of={InputStories.Default} />

## Propriedades do Input

### Placeholder

Use a prop `placeholder` para definir um texto que será exibido quando o campo estiver vazio.

**API:**
- **`placeholder`** (`string`) - Texto do placeholder exibido quando o campo está vazio

<Canvas of={InputStories.Default} />

### Multiline

Use `multiline={true}` para criar um campo de texto que aceita quebras de linha.

**API:**
- **`multiline`** (`boolean`, padrão: `false`) - Define se o campo aceita múltiplas linhas

<Canvas of={InputStories.Multiline} />

### AutoFocus

Use `autoFocus={true}` para que o campo receba foco automaticamente quando o componente for renderizado.

**API:**
- **`autoFocus`** (`boolean`, padrão: `false`) - Define se o campo deve receber foco automaticamente

<Canvas of={InputStories.AutoFocus} />

### Disabled

Use `disabled={true}` para desabilitar a interação com o campo. O campo manterá seu valor mas não poderá ser modificado.

**API:**
- **`disabled`** (`boolean`, padrão: `false`) - Define se o campo está desabilitado

<Canvas of={InputStories.Disabled} />

## Composição - Botões e Mensagens

### Input.ClearButton

Permite que o usuário limpe rapidamente todo o conteúdo. **Aparece automaticamente apenas quando há texto no campo.**

<Canvas of={InputStories.WithClearButton} />

```tsx
<Input value={text} onChangeText={setText}>
  <Input.ClearButton />
</Input>
```

### Input.IconButton

Adiciona um botão com ícone à direita do campo.

**API:**
- **`icon`** (`React.ReactNode`) - Componente de ícone a ser exibido
- **`onPress`** (`() => void`) - Callback executado quando o botão é pressionado

<Canvas of={InputStories.WithIconButton} />

```tsx
<Input value={text} onChangeText={setText}>
  <Input.IconButton 
    icon={<Search />} 
    onPress={() => handleSearch()} 
  />
</Input>
```

### Input.Button

Adiciona um botão com texto à direita do campo.

**API:**
- **`text`** (`string`) - Texto a ser exibido no botão
- **`onPress`** (`() => void`) - Callback executado quando o botão é pressionado

<Canvas of={InputStories.WithTextButton} />

```tsx
<Input value={text} onChangeText={setText}>
  <Input.Button 
    text="Enviar" 
    onPress={() => handleSend()} 
  />
</Input>
```

### Input.Error

Exibe uma mensagem de erro abaixo do campo. Use condicionalmente baseado na validação do campo.

**API:**
- **`value`** (`string`) - Mensagem de erro a ser exibida

<Canvas of={InputStories.WithError} />

```tsx
<Input value={text} onChangeText={setText}>
  {hasError && (
    <Input.Error value="Mensagem de erro aqui" />
  )}
</Input>
```

### Input.SupportingText

Exibe texto informativo abaixo do campo.

**API:**
- **`value`** (`string`) - Texto a ser exibido

<Canvas of={InputStories.WithSupportingText} />

```tsx
<Input value={text} onChangeText={setText}>
  <Input.SupportingText value="Digite pelo menos 8 caracteres" />
</Input>
```

### Input.Counter

Exibe um contador no canto inferior direito mostrando quantos caracteres foram digitados em relação ao máximo permitido.

**API:**
- **`value`** (`number`) - Valor atual do contador
- **`max`** (`number`) - Valor máximo permitido

<Canvas of={InputStories.WithCounter} />

```tsx
<Input value={text} onChangeText={setText}>
  <Input.Counter value={text.length} max={100} />
</Input>
```

## API do Input

- **`value`** (`string`, padrão: `""`) - Valor atual do campo de entrada
- **`placeholder`** (`string`) - Texto do placeholder exibido quando o campo está vazio
- **`multiline`** (`boolean`, padrão: `false`) - Define se o campo aceita múltiplas linhas
- **`disabled`** (`boolean`, padrão: `false`) - Define se o campo está desabilitado
- **`autoFocus`** (`boolean`, padrão: `false`) - Define se o campo deve receber foco automaticamente
- **`onChangeText`** (`(text: string) => void`) - Callback executado quando o texto do campo muda
- **`onFocus`** (`() => void`) - Callback executado quando o campo recebe foco
- **`onBlur`** (`() => void`) - Callback executado quando o campo perde o foco
- **`onPress`** (`() => void`) - Callback executado quando o campo é pressionado

## API dos Subcomponentes

### Input.ClearButton

Não possui props adicionais. **Aparece automaticamente quando há texto no campo** e desaparece quando o campo está vazio.

### Input.IconButton

- **`icon`** (`React.ReactNode`) - Componente de ícone a ser exibido
- **`onPress`** (`() => void`) - Callback executado quando o botão é pressionado

### Input.Button

- **`text`** (`string`) - Texto a ser exibido no botão
- **`onPress`** (`() => void`) - Callback executado quando o botão é pressionado

### Input.Error

- **`value`** (`string`) - Mensagem de erro a ser exibida

### Input.SupportingText

- **`value`** (`string`) - Texto de apoio a ser exibido

### Input.Counter

- **`value`** (`number`) - Valor atual do contador
- **`max`** (`number`) - Valor máximo permitido

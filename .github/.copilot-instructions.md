# GitHub Copilot Instructions - DSC Library

## Stack

React Native UI library: **React Native + TypeScript + Tamagui + iconoir-react-native + Storybook**

## Architecture

### File Structure

```
ComponentName/
  index.ts                    # Exports
  ComponentName.tsx           # Main component
  ComponentName.model.ts      # Types & interfaces
  ComponentName.stories.tsx   # Storybook stories
  ComponentName.styles.ts     # Styled components (if complex)
  components/                 # Sub-components (modular components)
    SubComponent/
      index.ts
      SubComponent.tsx
      SubComponent.model.ts
      SubComponent.styles.ts
  hooks/                      # Custom hooks (if needed)
    useComponentState.ts
    useComponentInteraction.ts
```

### Styled Components

```typescript
const StyledComponent = styled(View, {
  name: 'StyledComponent', // Required
  backgroundColor: '$color1',
  padding: '$medium',

  hoverStyle: { backgroundColor: '$color2' },
  pressStyle: { backgroundColor: '$color3' },
  focusStyle: { borderColor: '$color9', borderWidth: 2 },

  variants: {
    theme: {
      highlight: { borderColor: '$color9' },
      danger: { borderColor: '$red9' },
    },
  } as const,
});
```

## Design System

### Colors

- **Adaptive**: `$color1` (lightest) to `$color12` (darkest) - changes with theme
- **Semantic**: `$neutralBg1`, `$successBg` - always same color

### Spacing

`$nano` (1px), `$quark` (2px), `$tiny` (4px), `$small` (8px), `$medium` (16px), `$large` (24px), `$xl` (32px)

### Typography

Use components: `<TitleLarge>`, `<BodyStandard>`, `<LabelSmall>` - never direct Text styling

### Layout

- `YStack` (vertical), `XStack` (horizontal)
- Responsive props: `$sm={{ padding: '$large' }}`

## Icons

Always use `useTransformIcon` hook with iconoir-react-native:

```typescript
import { useTransformIcon } from '../utils';
import { Heart } from 'iconoir-react-native';

const icon = useTransformIcon(Heart, { size: 24, color: '$color9' });
```

## Standards

### TypeScript

```typescript
export interface ComponentProps extends ViewProps {
  /** Visual theme */
  theme?: 'highlight' | 'neutral' | 'danger';
  /** Main text */
  title: string;
  /** Press handler */
  onPress?: () => void;
}
```

### Component Requirements

- **Default theme**: 'highlight'
- **Accessibility**: accessibilityLabel, accessibilityRole
- **States**: focus, hover, press with proper styling
- **Z-index**: Use 500+ for focus borders

### Performance

```typescript
const Component = memo(({ data, onPress }) => {
  const handlePress = useCallback(() => {}, []);
  return <StyledComponent onPress={handlePress} />;
});
```

## Documentation (Portuguese)

### JSDoc

````typescript
/**
 * Componente DSC ComponentName
 *
 * Descrição breve do componente.
 *
 * @example
 * ```tsx
 * <ComponentName prop="valor" onPress={() => {}} />
 * ```
 */
````

### Storybook (MANDATORY)

```typescript
const meta: Meta<ComponentProps> = {
  title: 'Componentes/ComponentName',
  component: Component,
  parameters: {
    docs: {
      description: { component: 'Descrição em português...' },
      source: {
        transform: (_: string, { args }: any) => {
          // OBRIGATÓRIO: Fix "Show code" to show proper icon names
          const props = [
            args.type && `type="${args.type}"`,
            args.icon && `icon={<${args.icon} />}`,
          ]
            .filter(Boolean)
            .join(' ');
          return `<ComponentName${props && ` ${props}`} onPress={() => {}} />`;
        },
        state: 'open',
      },
    },
  },
  tags: ['autodocs'],
};

export const Default: Story = { args: {} };
```

### Required Stories

- **Default**: Estado padrão do componente (obrigatório)
- **Outras stories**: Criar apenas se necessário para demonstrar funcionalidades específicas

### Show Code Configuration

**OBRIGATÓRIO**: Configure `source.transform` para exibir código JSX correto:

```typescript
source: {
  transform: (_: string, { args }: any) => {
    const props = [
      args.type && `type="${args.type}"`,
      args.icon && `icon={<${args.icon} />}`, // Fix icon names
    ].filter(Boolean).join(' ');
    return `<ComponentName${props && ` ${props}`} onPress={() => {}} />`;
  },
  state: 'open',
}
```

## Exports

```typescript
// Component file
export { Component } from './Component';
export type { ComponentProps } from './Component.model';

// Main index.ts
export { Component } from './components/Component';
export type { ComponentProps } from './components/Component';
```

## Key Rules

✅ **Do**:

- Use design tokens (`$small`, `$color9`)
- Implement all interaction states
- Add accessibility props
- Use composition over custom components
- Follow file structure exactly
- Document in Portuguese
- Add mandatory source.transform in Storybook
- Avoid magic numbers when appropriate (use constants/tokens)

❌ **Don't**:

- Use hardcoded values
- Skip accessibility
- Create README.md files
- Use direct Text styling
- Forget to export in main index.ts
- Skip source.transform in stories
- Over-engineer simple numeric values
